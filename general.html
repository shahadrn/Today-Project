<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Today News</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="/img/icon.png" type="image/x-icon">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>

</head>

<body>
    <!--Menu-->
    <div class="ui large secondary inverted pointing fixedBar fixed menu">
        <a class="toc item">
            <i class="sidebar icon"></i>
        </a>
        <div class="sc-logo">News</div>
            <div class="right item">
                <a class="item" href="index.html">All</a>
                <a class="item active item" href="general.html">General</a>
                <a class="item" href="business.html">Business</a>
                <a class="item" href="technology.html">Technology</a>
                <a class="item" href="entertainment.html">Entertainment</a>
                <a class="item" href="health.html">Health</a>
                <a class="item" href="science.html">science</a>
            </div>
    </div>

    <!--Weather & Time Section-->
    <section class="WeatherCal-section">
        <div class="ui equal width center aligned stakable padded grid">
            <div class="row">
                <div class="eight wide mobile eight wide tablet eight wide computer column cc">
                    <div class="date-container loading">
                        <div class="time" id="time">
                             <span id="am-pm"></span>
                        </div>
                        <div class="date" id="date"></div>
                    </div>
                </div>


                <div class="eight wide mobile eight wide tablet eight wide computer column cc">
                    <div class="card cardWeather">
                        <div class="search">
                            <input type="text" class="searchBar" placeholder="Search">
                            <button><i class="search link icon"></i></button>
                        </div>
                        <div class="weather loading">
                            <h2 class="city">weather in Buraydah</h2>
                            <h1 class="temp">16 Â°C</h1>
                            <img src="https://www.weatherbit.io/static/img/icons/t05d.png" alt="" class="iconweather" />
                            <div class="description">mostly clear</div>
                            <div class="humidity">humidity</div>
                            <div class="wind">14 km/h</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!--Search, dropdown Row and Cards fetch API row-->
    <section id="contents" class="sc-section">
        <div class="ui stakable grid container">
            <div class="four column row">
                <div class="left floated column">
                    <div class="ui icon input ">
                        <input type="text" placeholder="Search..." spellcheck="false" data-ms-editor="true">
                        <i class="circular search link icon"></i>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="ui cards" id="output"></div>
            </div>
        </div>
    </section>

    <script>
        const getNews = function () {
            apiKey='b23fd6aac9c44682abb9580dae85d23f';
            category='general';
            const promise = fetch(`https://newsapi.org/v2/top-headlines?category=${this.category}&apiKey=${this.apiKey}`);
            promise.then((response) => {
                console.log(response)
                if (!response.ok) {
                    throw Error("Error");
                    }
                return response.json();
                }).then(data => {
                    console.log(data.articles);
                    document.getElementById("output").innerHTML = data.articles.map(general =>
                        `<div class="ui card">
                            <div class="image">
                                <img src=${general.urlToImage} class="imgnew"></div>
                            <div class="content">
                                <h5 class="header">${general.title}</h5>
                                <div class="description">${general.description}</div>
                            </div>
                            <div class="extra content">
                                <span>
                                    <a href=${general.url} target="_blank" class="ui button btn-read">Read more</a>
                                </span>
                            </div>                        
                        </div>`)
                    }).catch(error => {
                    console.log(error);
                    });
        }();
    </script>

    <script src="js/weather.js" defer></script>
    <script src="js/script.js"></script> 
</body>
</html>